<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Listado de Equipos</title>
    <link href="https://fonts.cdnfonts.com/css/caviar-dreams" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            font-family: 'Caviar Dreams', sans-serif;
        }

        .degradado-verde {
            background: linear-gradient(to right, #a8f0c6, #5cd68d);
        }

        .degradado-verde-hover:hover {
            background: linear-gradient(to right, #85e7b1, #45cc7f);
        }
    </style>
</head>
<body class="bg-green-50">

<div th:replace="~{admin/dashboard :: layout('Equipos', ~{::section})}">
    <section>
        <div class="max-w-6xl mx-auto bg-white shadow-md rounded-lg p-6 mt-6" style="background-color:rgb(232, 255, 238);">
            <h1 class="text-3xl font-bold mb-6 text-center text-white py-3 rounded degradado-verde">Listado de Equipos</h1>

            <div th:if="${success}" class="p-4 mb-4 text-sm text-green-700 bg-green-100 rounded-lg" role="alert">
                <span th:text="${success}"></span>
            </div>

            <!-- Filtros -->
            <form th:action="@{/admin/registros-equipo}" method="get" class="mb-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label for="tipo_equipo" class="block text-sm font-medium text-gray-700">Filtrar por Tipo de Equipo</label>
                    <select name="tipo_equipo" id="tipo_equipo"
                            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 bg-white">
                        <option value="">Todos</option>
                        <option th:each="tipo : ${tipos}" th:value="${tipo}" th:text="${tipo}" th:selected="${tipo == tipo_equipo}"></option>
                    </select>
                </div>

                <div>
                    <label for="marca" class="block text-sm font-medium text-gray-700">Filtrar por Marca</label>
                    <select name="marca" id="marca"
                            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 bg-white">
                        <option value="">Todas</option>
                        <option th:each="marca : ${marcas}" th:value="${marca}" th:text="${marca}" th:selected="${marca == marca_filtro}"></option>
                    </select>
                </div>

                <div>
                    <label for="nombre_equipo" class="block text-sm font-medium text-gray-700">Filtrar por Nombre del Equipo</label>
                    <select name="nombre_equipo" id="nombre_equipo"
                            class="mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 bg-white">
                        <option value="">Todos</option>
                        <option th:each="nombre : ${nombres}" th:value="${nombre}" th:text="${nombre}" th:selected="${nombre == nombre_equipo}"></option>
                    </select>
                </div>

                <!-- Botones -->
                <div class="md:col-span-3 flex flex-col sm:flex-row gap-4 justify-center mt-4">
                    <button type="submit"
                            class="px-6 py-2 rounded-md font-semibold text-white degradado-verde degradado-verde-hover transition duration-200">
                        Filtrar
                    </button>
                    <a th:href="@{/admin/registros-equipo}"
                       class="px-6 py-2 bg-gray-400 text-white rounded-md hover:bg-gray-600 transition duration-200">
                        Limpiar
                    </a>
                </div>
            </form>

            <!-- Tabla -->
            <div class="overflow-x-auto">
                <table class="w-full table-auto text-left border">
                    <thead>
                    <tr style="background-color:rgb(199, 255, 183);">
                        <th class="px-6 py-3">#</th>
                        <th class="px-6 py-3">Tipo de Equipo</th>
                        <th class="px-6 py-3">Nombre</th>
                        <th class="px-6 py-3">Marca</th>
                        <th class="px-6 py-3">Serial</th>
                        <th class="px-6 py-3">Descripción</th>
                        <th class="px-6 py-3">Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="equipo : ${equipos}" style="background-color:rgb(241, 255, 237);">
                        <td class="px-6 py-3" th:text="${equipo.user != null ? equipo.user.id : 'N/A'}"></td>
                        <td class="px-6 py-3" th:text="${equipo.tipo_equipo}"></td>
                        <td class="px-6 py-3" th:text="${equipo.nombre_equipo}"></td>
                        <td class="px-6 py-3" th:text="${equipo.marca}"></td>
                        <td class="px-6 py-3" th:text="${equipo.serial}"></td>
                        <td class="px-6 py-3" th:text="${equipo.descripcion}"></td>
                        <td class="px-6 py-3 space-x-2 text-sm">
                            <a th:href="@{/admin/registros-equipo/{id}(id=${equipo.id})}"
                               class="text-green-700 hover:underline font-medium">Ver</a>
                            <a th:href="@{/admin/registros-equipo/{id}/edit(id=${equipo.id})}"
                               class="text-yellow-600 hover:underline font-medium">Editar</a>
                            <form th:action="@{/admin/registros-equipo/{id}(id=${equipo.id})}" method="post" class="inline">
                                <input type="hidden" name="_method" value="delete"/>
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                                <button type="submit" class="text-red-600 hover:underline font-medium"
                                        onclick="return confirm('¿Estás segura de eliminar este equipo?')">
                                    Eliminar
                                </button>
                            </form>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>
</div>

</body>
</html>
